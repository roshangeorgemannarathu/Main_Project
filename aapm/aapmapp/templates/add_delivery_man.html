<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Delivery Man - Admin Panel</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
    }
    form {
      margin-top: 20px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input[type="text"], input[type="file"], select {
      width: 100%;
      padding: 12px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 16px;
    }
    input[type="submit"] {
      background-color: #ff9900;
      color: #fff;
      padding: 12px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    input[type="submit"]:hover {
      background-color: #e68a00;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Add Delivery Man</h1>
  
  <form id="manualForm" method="post" action="{% url 'add_delivery_man' %}" onsubmit="return validateForm()">
    {% csrf_token %}
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required>
    <p id="nameError" class="error"></p>
    
    <label for="email">Email:</label>
    <input type="text" id="email" name="email" required>
    <p id="emailError" class="error"></p>
    
    <label for="phone">Phone:</label>
    <input type="text" id="phone" name="phone" required>
    <p id="phoneError" class="error"></p>
    
    <label for="house_name">House Name:</label>
    <input type="text" id="house_name" name="house_name" required>
    <p id="houseNameError" class="error"></p>
    
    <label for="district">District:</label>
    <select id="district" name="district" required onchange="populateCitiesAndPincodes()">
        <option value="" disabled selected>Select District</option>
        <option value="Thiruvananthapuram">Thiruvananthapuram</option>
        <option value="Kollam">Kollam</option>
            <option value="Pathanamthitta">Pathanamthitta</option>
            <option value="Alappuzha">Alappuzha</option>
            <option value="Kottayam">Kottayam</option>
            <option value="Idukki">Idukki</option>
            <option value="Ernakulam">Ernakulam</option>
            <option value="Thrissur">Thrissur</option>
            <option value="Palakkad">Palakkad</option>
            <option value="Malappuram">Malappuram</option>
            <option value="Kozhikode">Kozhikode</option>
            <option value="Wayanad">Wayanad</option>
            <option value="Kannur">Kannur</option>
            <option value="Kasaragod">Kasaragod</option>
        <!-- Add other district options here -->
    </select>
    
    <label for="city">City:</label>
    <select id="city" name="city" required>
        <option value="" disabled selected>Select City</option>
        <!-- Add city options dynamically using JavaScript -->
    </select>
    
    <label for="pincode">Pincode:</label>
    <select id="pincode" name="pincode" required>
        <option value="" disabled selected>Select Pincode</option>
        <!-- Add pincode options dynamically using JavaScript -->
    </select>
    
    <label for="vehicle_type">Vehicle Type:</label>
    <select id="vehicle_type" name="vehicle_type" required>
        <option value="" disabled selected>Select Vehicle Type</option>
        <option value="bike">Bike</option>
        <option value="scooter">Scooter</option>
        <option value="car">Car</option>
        <option value="auto">Auto</option>
        <option value="pickup">Pickup</option>
        <option value="lorry">Lorry</option>
        <!-- Add other vehicle types here -->
    </select>
    
    <label for="vehicle_no">Vehicle No.:</label>
    <input type="text" id="vehicle_no" name="vehicle_no" required>
    <p id="vehicleNoError" class="error"></p>
    
    <input type="submit" value="Add Delivery Man">
  </form>

  <form id="csvForm">
    <label for="csvFile">Import CSV File:</label>
    <input type="file" id="csvFile" name="csvFile" accept=".csv" required>
    <input type="submit" value="Import">
  </form>
</div>
<center><div>
<a href="{% url 'admin_dashboard' %}" style="text-decoration: none;">
    <button style="background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;">Go back home</button>
  </a>
</div></center><br><br>
<script>
// Regular expressions for validation
var nameRegex =  /^[^\s][a-zA-Z\s]*$/;
                
var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
var phoneRegex = /^\+91\d{10}$/;
var houseNameRegex = /^[A-Za-z]{1,15}$/;
var vehicleNoRegex =   /^[A-Z]{2}\d{2}[A-Z]{1,2}\d{4}$/;

function validateName() {
  var nameInput = document.getElementById("name").value.trim();
  var nameError = document.getElementById("nameError");
  if (!nameRegex.test(nameInput)) {
      nameError.textContent = "Please enter a valid name.";
  } else {
      nameError.textContent = "";
  }
}

function validateEmail() {
    var emailInput = document.getElementById("email").value.trim();
    var emailError = document.getElementById("emailError");
    if (!emailRegex.test(emailInput)) {
        emailError.textContent = "Please enter a valid email.";
    } else {
        emailError.textContent = "";
    }
}

function validatePhone() {
    var phoneInput = document.getElementById("phone").value.trim();
    var phoneError = document.getElementById("phoneError");
    if (!phoneRegex.test(phoneInput)) {
        phoneError.textContent = "Please enter a valid phone number starting with +91.";
    } else {
        phoneError.textContent = "";
    }
}

function validateHouseName() {
    var houseNameInput = document.getElementById("house_name").value.trim();
    var houseNameError = document.getElementById("houseNameError");
    if (!houseNameRegex.test(houseNameInput)) {
        houseNameError.textContent = "Please enter a valid house name (max 15 characters).";
    } else {
        houseNameError.textContent = "";
    }
}

function validateVehicleNo() {
  var vehicleNoInput = document.getElementById("vehicle_no").value.trim();
  var vehicleNoError = document.getElementById("vehicleNoError");
  if (!vehicleNoRegex.test(vehicleNoInput)) {
      vehicleNoError.textContent = "Please enter a valid vehicle number.";
  } else {
      vehicleNoError.textContent = "";
  }
}

function validateForm() {
    validateName();
    validateEmail();
    validatePhone();
    validateHouseName();
    validateVehicleNo();

    // Check if any error messages are present
    var errors = document.querySelectorAll(".error");
    for (var i = 0; i < errors.length; i++) {
        if (errors[i].textContent !== "") {
            return false;
        }
    }

    return true; // Form submission allowed
}

document.getElementById("name").addEventListener("input", validateName);
document.getElementById("email").addEventListener("input", validateEmail);
document.getElementById("phone").addEventListener("input", validatePhone);
document.getElementById("house_name").addEventListener("input", validateHouseName);
document.getElementById("vehicle_no").addEventListener("input", validateVehicleNo);



function populateCitiesAndPincodes() {
  var district = document.getElementById("district").value;
  var citySelect = document.getElementById("city");
  var pincodeSelect = document.getElementById("pincode");
  citySelect.innerHTML = '<option value="" disabled selected>Select City</option>';
  pincodeSelect.innerHTML = '<option value="" disabled selected>Select Pincode</option>';
  
  if (district === "Thiruvananthapuram") {
      var cities = ["Thiruvananthapuram", "Neyyattinkara", "Varkala", "Nedumangad", "Attingal", "Kattakada", "Chirayinkeezhu"];
      var pincodes = ["695001", "695002", "695003", "695004", "695005", "695006", "695007"];
  } else if (district === "Kollam") {
      var cities = ["Kollam", "Punalur", "Karunagappally", "Paravur", "Kottarakkara", "Pathanapuram", "Chavara"];
      var pincodes = ["691001", "691002", "691003", "691004", "691005", "691006", "691007"];
  } else if (district === "Pathanamthitta") {
      var cities = ["Pathanamthitta", "Adoor", "Ranni", "Thiruvalla", "Kozhencherry", "Konni", "Mallappally"];
      var pincodes = ["689645", "691523", "689711", "689101", "689641", "689691", "689585"];
  } else if (district === "Alappuzha") {
      var cities = ["Alappuzha", "Cherthala", "Kayamkulam", "Mavelikara", "Chengannur", "Ambalappuzha", "Haripad"];
      var pincodes = ["688001", "688524", "690502", "690101", "689121", "688561", "690514"];
  } else if (district === "Kottayam") {
      var cities = ["Kottayam", "Changanassery", "Pala", "Vaikom", "Ettumanoor", "Kanjirappally", "Mundakayam"];
      var pincodes = ["686001", "686101", "686575", "686141", "686631", "686507", "686513"];
  } else if (district === "Idukki") {
      var cities = ["Thodupuzha", "Munnar", "Adimali", "Kumily", "Peerumedu", "Rajakkad", "Nedumkandam"];
      var pincodes = ["685584", "685612", "685561", "685509", "685531", "685566", "685553"];
  } else if (district === "Ernakulam") {
      var cities = ["Kochi (Cochin)", "Aluva", "Thrippunithura", "Perumbavoor", "Angamaly", "North Paravur", "Kalamassery"];
      var pincodes = ["682001", "683101", "682301", "683542", "683572", "683513", "683104"];
  } else if (district === "Thrissur") {
      var cities = ["Thrissur", "Chalakudy", "Guruvayur", "Kodungallur", "Irinjalakuda", "Kunnamkulam", "Wadakkanchery"];
      var pincodes = ["680001", "680307", "680101", "680664", "680121", "680503", "680582"];
  } else if (district === "Palakkad") {
      var cities = ["Palakkad", "Ottapalam", "Chittur-Thathamangalam", "Mannarkkad", "Shoranur", "Pattambi", "Alathur"];
      var pincodes = ["678001", "679101", "678102", "678582", "679122", "679303", "678541"];
  } else if (district === "Malappuram") {
      var cities = ["Malappuram", "Manjeri", "Tirur", "Perinthalmanna", "Ponnani", "Nilambur", "Kondotty"];
      var pincodes = ["676505", "676121", "676101", "679322", "679577", "679329", "673638"];
  } else if (district === "Kozhikode") {
      var cities = ["Kozhikode (Calicut)", "Vadakara", "Thamarassery", "Kunnamangalam", "Ramanattukara", "Feroke", "Koyilandy"];
      var pincodes = ["673001", "673101", "673573", "673571", "673633", "673632", "673305"];
  } else if (district === "Wayanad") {
      var cities = ["Kalpetta", "Sultan Bathery", "Mananthavady", "Vythiri", "Meppadi", "Pulpally", "Ambalavayal"];
      var pincodes = ["673121", "673592", "670645", "673576", "673577", "673579", "673593"];
  } else if (district === "Kannur") {
      var cities = ["Kannur", "Thalassery", "Payyannur", "Mattannur", "Iritty", "Taliparamba", "Kuthuparamba"];
      var pincodes = ["670001", "670101", "670307", "670702", "670703", "670141", "670643"];
  } else if (district === "Kasaragod") {
      var cities = ["Kasaragod", "Kanhangad", "Nileshwar", "Manjeshwar", "Uduma", "Chengala", "Badiadka"];
      var pincodes = ["671121", "671315", "671314", "671323", "671317", "671541", "671551"];
  }
  
  for (var i = 0; i < cities.length; i++) {
      var option = document.createElement("option");
      option.text = cities[i];
      option.value = cities[i];
      citySelect.add(option);
  }
  
  for (var i = 0; i < pincodes.length; i++) {
      var option = document.createElement("option");
      option.text = pincodes[i];
      option.value = pincodes[i];
      pincodeSelect.add(option);
  }
}

</script>

</body>
</html>
